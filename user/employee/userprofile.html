<!DOCTYPE html>
<html lang="en">
  <head>
    <title>user profile</title>
    <link rel="stylesheet" type="text/css" href="/user/css/userprofile.css" />

  </head>
  <body>

        <header>
          <h2>username</h2>
        </header>

        <section>
          <nav>
            <ul>
              <li><a href="/user/userregister.html">Coffee Date Register</a></li>
              <li><a href="#">feature2</a></li>
              <li><a href="#">feature3</a></li>
            </ul>
          </nav>

          <table  class="table table-bordered table-sm" >
            <h3>My CoffeeDate</h3>
            <thead>
              <tr>
                <th>UserID</th>
                <th>FirstName</th>
                <th>LastName</th>
                <th>Email</th>
            </thead>
            <tbody id="coffeedate">
            </tbody>
          </table>
        </section>

        <footer>
          <p>Footer</p>
        </footer>


        <script>
 fetch("http://localhost:5001/backend/data/", {method: "GET"})
                        .then(res => res.text())
                        .then(text => {
                        // console.log("Request complete! response:",text);
                          const allRegUsers = JSON.parse(text); 
                          const table = document.getElementById("coffeedate");

                        //  for (let i =0 ;i<allRegUsers.length; i++) 
                        //   {for (const [key, value] of Object.entries(allRegUsers[i])) {
                        //         //console.log(`${key}: ${value}`);
                        //        if (key ==="firstName" && value==='Chao'){

                        //         console.log('HERE')
                        //           // let row = table.insertRow();
                        //           // let id=  row.insertCell(0);
                        //           // id.innerHTML= allRegUsers[i].id
                        //           // let firstName = row.insertCell(1);
                        //           // firstName.innerHTML = allRegUsers[i].firstName;
                        //           // let lastName = row.insertCell(2);
                        //           // lastName.innerHTML = allRegUsers[i].lastName;
                        //           // let email = row.insertCell(3);
                        //           // email.innerHTML = allRegUsers[i].email;

                        //         }
                        //        }
                        //     }
                        // //  console.log(allRegUsers)

                  
                          allRegUsers.map(user =>{
                             console.log(user.firstName)
                            if (user.firstName==="test1"){
                          
                            let row = table.insertRow();
                            let id=  row.insertCell(0);
                            id.innerHTML= user.id
                            let firstName = row.insertCell(1);
                            firstName.innerHTML = user.firstName;
                            let lastName = row.insertCell(2);
                            lastName.innerHTML = user.lastName;
                            let email = row.insertCell(3);
                            email.innerHTML = user.email;
                            }
                         })

                          // allRegUsers.map(user =>{         
                          //       var rowNode = document.createElement("tr");
                          //       var cellNode = document.createElement("td");
                          //       var textNode = document.createTextNode(user.id + '\t'+ user.firstName +'\t'+user.lastName+'\t'+user.email);
                          //       cellNode.appendChild(textNode)
                          //       rowNode.appendChild(cellNode);
                          //       table.appendChild(rowNode)
                          //     })
});


        </script>
  </body>
</html>

